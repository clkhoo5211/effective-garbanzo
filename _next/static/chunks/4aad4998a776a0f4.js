(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,72412,88653,e=>{"use strict";var t=e.i(43476),r=e.i(932),a=e.i(71645),s=e.i(74080);e.i(47167);var n=e.i(31178),l=e.i(47414),i=e.i(74008),o=e.i(21476),c=e.i(72846),u=a,d=e.i(37806);function m(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class p extends u.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,r=(0,c.isHTMLElement)(e)&&e.offsetWidth||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=r-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function h({children:e,isPresent:r,anchorX:s,root:n}){let l=(0,u.useId)(),i=(0,u.useRef)(null),o=(0,u.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=(0,u.useContext)(d.MotionConfigContext),h=function(...e){return a.useCallback(function(...e){return t=>{let r=!1,a=e.map(e=>{let a=m(e,t);return r||"function"!=typeof a||(r=!0),a});if(r)return()=>{for(let t=0;t<a.length;t++){let r=a[t];"function"==typeof r?r():m(e[t],null)}}}}(...e),e)}(i,e?.ref);return(0,u.useInsertionEffect)(()=>{let{width:e,height:t,top:a,left:u,right:d}=o.current;if(r||!i.current||!e||!t)return;let m="left"===s?`left: ${u}`:`right: ${d}`;i.current.dataset.motionPopId=l;let p=document.createElement("style");c&&(p.nonce=c);let h=n??document.head;return h.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            ${m}px !important;
            top: ${a}px !important;
          }
        `),()=>{h.contains(p)&&h.removeChild(p)}},[r]),(0,t.jsx)(p,{isPresent:r,childRef:i,sizeRef:o,children:u.cloneElement(e,{ref:h})})}let x=({children:e,initial:r,isPresent:s,onExitComplete:n,custom:i,presenceAffectsLayout:c,mode:u,anchorX:d,root:m})=>{let p=(0,l.useConstant)(g),x=(0,a.useId)(),f=!0,y=(0,a.useMemo)(()=>(f=!1,{id:x,initial:r,isPresent:s,custom:i,onExitComplete:e=>{for(let t of(p.set(e,!0),p.values()))if(!t)return;n&&n()},register:e=>(p.set(e,!1),()=>p.delete(e))}),[s,p,n]);return c&&f&&(y={...y}),(0,a.useMemo)(()=>{p.forEach((e,t)=>p.set(t,!1))},[s]),a.useEffect(()=>{s||p.size||!n||n()},[s]),"popLayout"===u&&(e=(0,t.jsx)(h,{isPresent:s,anchorX:d,root:m,children:e})),(0,t.jsx)(o.PresenceContext.Provider,{value:y,children:e})};function g(){return new Map}var f=e.i(64978);let y=e=>e.key||"";function b(e){let t=[];return a.Children.forEach(e,e=>{(0,a.isValidElement)(e)&&t.push(e)}),t}let v=({children:e,custom:r,initial:s=!0,onExitComplete:o,presenceAffectsLayout:c=!0,mode:u="sync",propagate:d=!1,anchorX:m="left",root:p})=>{let[h,g]=(0,f.usePresence)(d),v=(0,a.useMemo)(()=>b(e),[e]),j=d&&!h?[]:v.map(y),w=(0,a.useRef)(!0),N=(0,a.useRef)(v),C=(0,l.useConstant)(()=>new Map),[S,R]=(0,a.useState)(v),[k,U]=(0,a.useState)(v);(0,i.useIsomorphicLayoutEffect)(()=>{w.current=!1,N.current=v;for(let e=0;e<k.length;e++){let t=y(k[e]);j.includes(t)?C.delete(t):!0!==C.get(t)&&C.set(t,!1)}},[k,j.length,j.join("-")]);let _=[];if(v!==S){let e=[...v];for(let t=0;t<k.length;t++){let r=k[t],a=y(r);j.includes(a)||(e.splice(t,0,r),_.push(r))}return"wait"===u&&_.length&&(e=_),U(b(e)),R(v),null}let{forceRender:E}=(0,a.useContext)(n.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:k.map(e=>{let a=y(e),n=(!d||!!h)&&(v===k||j.includes(a));return(0,t.jsx)(x,{isPresent:n,initial:(!w.current||!!s)&&void 0,custom:r,presenceAffectsLayout:c,mode:u,root:p,onExitComplete:n?void 0:()=>{if(!C.has(a))return;C.set(a,!0);let e=!0;C.forEach(t=>{t||(e=!1)}),e&&(E?.(),U(N.current),d&&g?.(),o&&o())},anchorX:m,children:e},a)})})};e.s(["AnimatePresence",()=>v],88653);var j=e.i(46932),w=e.i(75157);function N(e){let n,l,i,o,c,u,d,m,p=(0,r.c)(19),{open:h,onClose:x,children:g,className:f,disableCloseOnOverlay:y,lockScroll:b,closeOnEsc:N}=e,S=void 0!==y&&y,R=void 0===b||b,k=void 0===N||N,[U,_]=(0,a.useState)(!1);return(p[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{_(!0)},l=[],p[0]=n,p[1]=l):(n=p[0],l=p[1]),(0,a.useEffect)(n,l),p[2]!==R||p[3]!==h?(i=()=>{if(!R||!h)return;let e=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=e}},o=[R,h],p[2]=R,p[3]=h,p[4]=i,p[5]=o):(i=p[4],o=p[5]),(0,a.useEffect)(i,o),p[6]!==k||p[7]!==x||p[8]!==h?(c=()=>{if(!k||!h)return;let e=e=>{"Escape"===e.key&&x()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},u=[k,x,h],p[6]=k,p[7]=x,p[8]=h,p[9]=c,p[10]=u):(c=p[9],u=p[10]),(0,a.useEffect)(c,u),U)?(p[11]!==g||p[12]!==f||p[13]!==S||p[14]!==x||p[15]!==h?(d=h&&(0,t.jsx)(j.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-white/40 p-4 backdrop-blur-xl",onClick:S?void 0:x,children:(0,t.jsx)(j.motion.div,{initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:20},className:(0,w.cn)("static",f),onClick:C,children:g})}),p[11]=g,p[12]=f,p[13]=S,p[14]=x,p[15]=h,p[16]=d):d=p[16],p[17]!==d?(m=(0,s.createPortal)((0,t.jsx)(v,{children:d}),document.body),p[17]=d,p[18]=m):m=p[18],m):null}function C(e){return e.stopPropagation()}e.s(["DialogModal",()=>N],72412)},97005,e=>{"use strict";function t(e){return new Promise((t,r)=>{let a=new FileReader;a.onload=()=>t(String(a.result||"")),a.onerror=r,a.readAsText(e)})}function r(e){return new Promise((t,r)=>{let a=new FileReader;a.onload=()=>{t(String(a.result||"").replace(/^data:[^;]+;base64,/,""))},a.onerror=r,a.readAsDataURL(e)})}async function a(e){let t=await e.arrayBuffer(),r=new Uint8Array(await crypto.subtle.digest("SHA-256",t)),a="";for(let e=0;e<r.length;e++)a+=r[e].toString(16).padStart(2,"0");return a.slice(0,16)}e.s(["fileToBase64NoPrefix",()=>r,"hashFileSHA256",()=>a,"readFileAsText",()=>t])},7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},66752,e=>{e.v([{name:"Pixel Motion",year:2025,description:"网页端像素绘画工具，支持组件化画布，多画布同时绘画，色彩变量",image:"https://pixel-motion.yysuni.com/favicon.svg",url:"https://pixel-motion.yysuni.com/",tags:["像素画","React","Figma","阮周刊"]},{name:"Path Motion",year:2025,description:"在线 svg path 工具，针对 path 绘制、压缩、运动等功能",image:"https://path-motion.yysuni.com/favicon.svg",url:"https://path-motion.yysuni.com/canvas",tags:["SVG","Path","Motion","阮周刊"],github:"https://github.com/YYsuni/path-motion"},{name:"JSON Viewer",year:2023,description:"React 的 JSON 查看/编辑组件，组件的实现方式依赖于 html 原生逻辑，比较轻量化。第二个用心的组件，学习了前辈的包装方式，介绍方式，网站样式。用户也慢慢多了起来。",image:"https://jv.yysuni.com/favicon.svg",url:"https://jv.yysuni.com/",tags:["React","JSON","Viewer","阮周刊"],github:"https://github.com/YYsuni/react18-json-view",npm:"https://www.npmjs.com/package/react18-json-view"},{name:"第一版 Blog 网站",year:2023,description:"最开始是觉得掘金这种网站写文章挺好的。后面还是想写一个自己网站，体现自己的风格。MDX 还可以自己写组件到 blog，直接交互，多好。。。没想到为以后埋下了坑。",image:"https://blog-archive.yysuni.com/favicons/android-chrome-512x512.png",url:"https://blog-archive.yysuni.com/",tags:["Next.js","MDX"]},{name:"Blockies",year:2023,description:" Blockies React组件，SVG 实现，用于生成区块链地址的图标。这是我的第一个有人用的组件，虽然人不多",image:"/images/blockies.svg",url:"https://blockies-react-svg.vercel.app/",tags:["React","SVG","Blockies"],github:"https://github.com/YYsuni/blockies-react-svg",npm:"https://www.npmjs.com/package/blockies-react-svg"},{name:"Vue3 组件库",year:2021,description:"比较让人怀念的一个组件库了，那个时候每个前端程序员都想做一套自己的组件库，我也是。写出来的时候特别让自己开心，觉得好看，舒服。那时也第一次学会免费的 github/gitee pages 部署页面，但也倒腾半天，现在用 vercel 重新上线放着吧。",image:"/images/vue-kit.webp",url:"http://archive-suni.vercel.app/#/",tags:["Vue","Library"],github:"https://github.com/YYsuni/archive-suni"}])},63936,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(46932),s=e.i(46696),n=e.i(932),l=e.i(22016),i=e.i(75157),o=e.i(99151),c=e.i(7233),u=e.i(72412);function d(e){let a,l,i,o,d,m,p,h,x,g,f,y,b,v,j,w,N,C=(0,n.c)(36),{currentImage:S,onClose:R,onSubmit:k}=e,[U,_]=(0,r.useState)(S||""),[E,I]=(0,r.useState)(null),O=(0,r.useRef)(null);C[0]===Symbol.for("react.memo_cache_sentinel")?(a=e=>{let t=e.target.files?.[0];if(!t)return;if(!t.type.startsWith("image/"))return void s.toast.error("请选择图片文件");let r=URL.createObjectURL(t);I({file:t,previewUrl:r}),_("")},C[0]=a):a=C[0];let G=a;C[1]!==S||C[2]!==R||C[3]!==k||C[4]!==E||C[5]!==U?(l=e=>{if(e.preventDefault(),E)k({type:"file",file:E.file,previewUrl:E.previewUrl});else{if(!U.trim())return void s.toast.error("请上传图片或输入 URL");k({type:"url",url:U.trim()})}I(null),_(S||""),R()},C[1]=S,C[2]=R,C[3]=k,C[4]=E,C[5]=U,C[6]=l):l=C[6];let P=l;C[7]!==S||C[8]!==R||C[9]!==E?(i=()=>{E&&URL.revokeObjectURL(E.previewUrl),I(null),_(S||""),R()},C[7]=S,C[8]=R,C[9]=E,C[10]=i):i=C[10];let T=i;return C[11]===Symbol.for("react.memo_cache_sentinel")?(o=(0,t.jsx)("h2",{className:"mb-4 text-xl font-bold",children:"选择图片"}),C[11]=o):o=C[11],C[12]===Symbol.for("react.memo_cache_sentinel")?(d=(0,t.jsx)("label",{className:"text-secondary mb-2 block text-sm font-medium",children:"上传图片"}),m=(0,t.jsx)("input",{ref:O,type:"file",accept:"image/*",className:"hidden",onChange:G}),p=()=>O.current?.click(),C[12]=d,C[13]=m,C[14]=p):(d=C[12],m=C[13],p=C[14]),C[15]!==E?(h=(0,t.jsxs)("div",{children:[d,m,(0,t.jsx)("div",{onClick:p,className:"mx-auto flex h-32 w-32 cursor-pointer items-center justify-center rounded-xl border border-gray-300 bg-gray-100 transition-colors hover:bg-gray-200",children:E?(0,t.jsx)("img",{src:E.previewUrl,alt:"preview",className:"h-full w-full rounded-xl object-cover"}):(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(c.Plus,{className:"text-secondary mx-auto mb-1 h-8 w-8"}),(0,t.jsx)("p",{className:"text-secondary text-xs",children:"点击上传图片"})]})})]}),C[15]=E,C[16]=h):h=C[16],C[17]===Symbol.for("react.memo_cache_sentinel")?(x=(0,t.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,t.jsx)("div",{className:"w-full border-t border-gray-300"})}),C[17]=x):x=C[17],C[18]===Symbol.for("react.memo_cache_sentinel")?(g=(0,t.jsxs)("div",{className:"relative",children:[x,(0,t.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,t.jsx)("span",{className:"text-secondary rounded-lg bg-white px-4 py-1",children:"或"})})]}),f=(0,t.jsx)("label",{className:"text-secondary mb-2 block text-sm font-medium",children:"图片 URL"}),C[18]=g,C[19]=f):(g=C[18],f=C[19]),C[20]!==E?(y=e=>{_(e.target.value),E&&(URL.revokeObjectURL(E.previewUrl),I(null))},C[20]=E,C[21]=y):y=C[21],C[22]!==y||C[23]!==U?(b=(0,t.jsxs)("div",{children:[f,(0,t.jsx)("input",{type:"url",value:U,onChange:y,placeholder:"https://example.com/image.png",className:"focus:ring-brand w-full rounded-lg border border-gray-300 bg-gray-200 px-4 py-2 focus:ring-2 focus:outline-none"})]}),C[22]=y,C[23]=U,C[24]=b):b=C[24],C[25]===Symbol.for("react.memo_cache_sentinel")?(v=(0,t.jsx)("button",{type:"submit",className:"brand-btn flex-1 justify-center rounded-lg px-6 py-2.5",children:"确认"}),C[25]=v):v=C[25],C[26]!==T?(j=(0,t.jsxs)("div",{className:"flex gap-3 pt-2",children:[v,(0,t.jsx)("button",{type:"button",onClick:T,className:"flex-1 rounded-lg border border-gray-300 bg-white px-6 py-2.5 transition-colors hover:bg-gray-50",children:"取消"})]}),C[26]=T,C[27]=j):j=C[27],C[28]!==P||C[29]!==b||C[30]!==j||C[31]!==h?(w=(0,t.jsxs)("form",{onSubmit:P,className:"space-y-4",children:[h,g,b,j]}),C[28]=P,C[29]=b,C[30]=j,C[31]=h,C[32]=w):w=C[32],C[33]!==T||C[34]!==w?(N=(0,t.jsxs)(u.DialogModal,{open:!0,onClose:T,className:"card w-md",children:[o,w]}),C[33]=T,C[34]=w,C[35]=N):N=C[35],N}function m(e){let s,c,u,m,g,f,y,b,v,j,w,N,C,S,R,k,U,_,E,I,O,G,P,T,F,B,H,M=(0,n.c)(90),{project:L,isEditMode:A,onUpdate:$,onDelete:W}=e,D=void 0!==A&&A,[V,Y]=(0,r.useState)(!1),{maxSM:z}=(0,o.useSize)(),[J,X]=(0,r.useState)(L),[K,q]=(0,r.useState)(!1),[Q,Z]=(0,r.useState)(null);M[0]!==Q||M[1]!==J||M[2]!==$||M[3]!==L?(s=(e,t)=>{let r={...J,[e]:t};X(r),$?.(r,L,Q||void 0)},M[0]=Q,M[1]=J,M[2]=$,M[3]=L,M[4]=s):s=M[4];let ee=s;M[5]!==J||M[6]!==$||M[7]!==L?(c=e=>{Z(e);let t="url"===e.type?e.url:e.previewUrl,r={...J,image:t};X(r),$?.(r,L,e)},M[5]=J,M[6]=$,M[7]=L,M[8]=c):c=M[8];let et=c;M[9]!==ee?(u=e=>{ee("tags",e.split(",").map(x).filter(h))},M[9]=ee,M[10]=u):u=M[10];let er=u;M[11]!==L?(m=()=>{X(L),Y(!1),Z(null)},M[11]=L,M[12]=m):m=M[12];let ea=m,es=D&&V;M[13]===Symbol.for("react.memo_cache_sentinel")?(g={opacity:0,scale:.9},M[13]=g):g=M[13],M[14]!==z?(f=z?{animate:{opacity:1,scale:1}}:{whileInView:{opacity:1,scale:1}},M[14]=z,M[15]=f):f=M[15],M[16]!==ea||M[17]!==D||M[18]!==V||M[19]!==W?(y=D&&(0,t.jsx)("div",{className:"absolute top-3 right-3 z-10 flex gap-2",children:V?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:ea,className:"rounded-lg px-2 py-1.5 text-xs text-gray-400 transition-colors hover:text-gray-600",children:"取消"}),(0,t.jsx)("button",{onClick:()=>Y(!1),className:"rounded-lg px-2 py-1.5 text-xs text-blue-400 transition-colors hover:text-blue-600",children:"完成"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>Y(!0),className:"rounded-lg px-2 py-1.5 text-xs text-blue-400 transition-colors hover:text-blue-600",children:"编辑"}),(0,t.jsx)("button",{onClick:W,className:"rounded-lg px-2 py-1.5 text-xs text-red-400 transition-colors hover:text-red-600",children:"删除"})]})}),M[16]=ea,M[17]=D,M[18]=V,M[19]=W,M[20]=y):y=M[20];let en=J.image,el=J.name,ei=es&&"cursor-pointer";M[21]!==ei?(b=(0,i.cn)("h-16 w-16 shrink-0 rounded-xl object-cover",ei),M[21]=ei,M[22]=b):b=M[22],M[23]!==es?(v=()=>es&&q(!0),M[23]=es,M[24]=v):v=M[24],M[25]!==J.image||M[26]!==J.name||M[27]!==b||M[28]!==v?(j=(0,t.jsx)("img",{src:en,alt:el,className:b,onClick:v}),M[25]=J.image,M[26]=J.name,M[27]=b,M[28]=v,M[29]=j):j=M[29],M[30]!==es?(w=es&&(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center rounded-xl bg-black/40 opacity-0 transition-opacity group-hover:opacity-100",children:(0,t.jsx)("span",{className:"text-xs text-white",children:"更换"})}),M[30]=es,M[31]=w):w=M[31],M[32]!==j||M[33]!==w?(N=(0,t.jsxs)("div",{className:"group relative",children:[j,w]}),M[32]=j,M[33]=w,M[34]=N):N=M[34],M[35]!==ee?(C=e=>ee("name",e.currentTarget.textContent||""),M[35]=ee,M[36]=C):C=M[36];let eo=es&&"cursor-text focus:outline-none";M[37]!==eo?(S=(0,i.cn)("text-lg font-semibold",eo),M[37]=eo,M[38]=S):S=M[38],M[39]!==es||M[40]!==J.name||M[41]!==C||M[42]!==S?(R=(0,t.jsx)("h3",{contentEditable:es,suppressContentEditableWarning:!0,onBlur:C,className:S,children:J.name}),M[39]=es,M[40]=J.name,M[41]=C,M[42]=S,M[43]=R):R=M[43],M[44]!==es||M[45]!==ee||M[46]!==J.year?(k=es?(0,t.jsx)("input",{type:"number",value:J.year,onChange:e=>ee("year",parseInt(e.target.value)||0),className:"text-secondary w-18 rounded border border-gray-300 px-2 py-1 text-sm focus:outline-none"}):(0,t.jsx)("span",{className:"text-secondary text-sm",children:J.year}),M[44]=es,M[45]=ee,M[46]=J.year,M[47]=k):k=M[47],M[48]!==R||M[49]!==k?(U=(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[R,k]}),M[48]=R,M[49]=k,M[50]=U):U=M[50],M[51]!==es||M[52]!==er||M[53]!==J.tags?(_=es?(0,t.jsx)("input",{type:"text",value:J.tags.join(", "),onChange:e=>er(e.target.value),placeholder:"标签，用逗号分隔",className:"w-full rounded-lg border border-gray-300 bg-gray-50 px-2 py-1 text-xs focus:outline-none"}):J.tags.map(p),M[51]=es,M[52]=er,M[53]=J.tags,M[54]=_):_=M[54],M[55]!==_?(E=(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:_}),M[55]=_,M[56]=E):E=M[56],M[57]!==U||M[58]!==E?(I=(0,t.jsxs)("div",{className:"flex-1",children:[U,E]}),M[57]=U,M[58]=E,M[59]=I):I=M[59],M[60]!==N||M[61]!==I?(O=(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[N,I]}),M[60]=N,M[61]=I,M[62]=O):O=M[62],M[63]!==ee?(G=e=>ee("description",e.currentTarget.textContent||""),M[63]=ee,M[64]=G):G=M[64];let ec=es&&"cursor-text focus:outline-none";return M[65]!==ec?(P=(0,i.cn)("text-secondary text-sm leading-relaxed",ec),M[65]=ec,M[66]=P):P=M[66],M[67]!==es||M[68]!==J.description||M[69]!==G||M[70]!==P?(T=(0,t.jsx)("p",{contentEditable:es,suppressContentEditableWarning:!0,onBlur:G,className:P,children:J.description}),M[67]=es,M[68]=J.description,M[69]=G,M[70]=P,M[71]=T):T=M[71],M[72]!==es||M[73]!==ee||M[74]!==J.github||M[75]!==J.npm||M[76]!==J.url?(F=(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:es?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("input",{type:"url",value:J.url,onChange:e=>ee("url",e.target.value),placeholder:"网站 URL",className:"flex-1 rounded-lg border border-gray-300 bg-gray-50 px-3 py-1.5 text-sm focus:outline-none"}),(0,t.jsx)("input",{type:"url",value:J.github||"",onChange:e=>ee("github",e.target.value||void 0),placeholder:"GitHub URL（可选）",className:"flex-1 rounded-lg border border-gray-300 bg-gray-50 px-3 py-1.5 text-sm focus:outline-none"}),(0,t.jsx)("input",{type:"url",value:J.npm||"",onChange:e=>ee("npm",e.target.value||void 0),placeholder:"NPM URL（可选）",className:"flex-1 rounded-lg border border-gray-300 bg-gray-50 px-3 py-1.5 text-sm focus:outline-none"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.default,{href:J.url,target:"_blank",rel:"noopener noreferrer",className:"rounded-lg border bg-white/50 px-3 py-1.5 text-sm font-medium transition-colors hover:bg-white/80",children:"Website"}),J.github&&(0,t.jsx)(l.default,{href:J.github,target:"_blank",rel:"noopener noreferrer",className:"rounded-lg border bg-white/50 px-3 py-1.5 text-sm font-medium transition-colors hover:bg-white/80",children:"GitHub"}),J.npm&&(0,t.jsx)(l.default,{href:J.npm,target:"_blank",rel:"noopener noreferrer",className:"rounded-lg border bg-white/50 px-3 py-1.5 text-sm font-medium transition-colors hover:bg-white/80",children:"NPM"})]})}),M[72]=es,M[73]=ee,M[74]=J.github,M[75]=J.npm,M[76]=J.url,M[77]=F):F=M[77],M[78]!==es||M[79]!==et||M[80]!==J.image||M[81]!==K?(B=es&&K&&(0,t.jsx)(d,{currentImage:J.image,onClose:()=>q(!1),onSubmit:et}),M[78]=es,M[79]=et,M[80]=J.image,M[81]=K,M[82]=B):B=M[82],M[83]!==O||M[84]!==T||M[85]!==F||M[86]!==B||M[87]!==f||M[88]!==y?(H=(0,t.jsxs)(a.motion.div,{initial:g,...f,className:"card relative flex flex-col gap-4",children:[y,O,T,F,B]}),M[83]=O,M[84]=T,M[85]=F,M[86]=B,M[87]=f,M[88]=y,M[89]=H):H=M[89],H}function p(e){return(0,t.jsx)("span",{className:"text-secondary rounded-lg bg-white/50 px-2 py-1 text-xs",children:e},e)}function h(e){return e}function x(e){return e.trim()}function g(e){let a,l,i,o,m,p,h,x,g,v,j,w,N,C,S,R,k,U,_,E,I,O,G,P,T,F,B,H,M,L,A,$,W,D,V,Y,z=(0,n.c)(94),{project:J,onClose:X,onSave:K}=e;z[0]===Symbol.for("react.memo_cache_sentinel")?(a=new Date().getFullYear(),z[0]=a):a=z[0],z[1]===Symbol.for("react.memo_cache_sentinel")?(l={name:"",year:a,image:"",url:"",description:"",tags:[],github:void 0,npm:void 0},z[1]=l):l=z[1];let[q,Q]=(0,r.useState)(l),[Z,ee]=(0,r.useState)(!1),[et,er]=(0,r.useState)("");z[2]!==J?(i=()=>{J?(Q(J),er(J.tags.join(", "))):(Q({name:"",year:new Date().getFullYear(),image:"",url:"",description:"",tags:[],github:void 0,npm:void 0}),er(""))},o=[J],z[2]=J,z[3]=i,z[4]=o):(i=z[3],o=z[4]),(0,r.useEffect)(i,o),z[5]!==q?(m=e=>{let t="url"===e.type?e.url:e.previewUrl;Q({...q,image:t})},z[5]=q,z[6]=m):m=z[6];let ea=m;z[7]!==q?(p=e=>{er(e);let t=e.split(",").map(b).filter(y);Q({...q,tags:t})},z[7]=q,z[8]=p):p=z[8];let es=p;z[9]!==q||z[10]!==X||z[11]!==K||z[12]!==J?(h=()=>{q.name.trim()&&q.image.trim()&&q.url.trim()&&q.description.trim()?0===q.tags.length?s.toast.error("请至少添加一个标签"):(K(q),X(),s.toast.success(J?"更新成功":"添加成功")):s.toast.error("请填写所有必填项")},z[9]=q,z[10]=X,z[11]=K,z[12]=J,z[13]=h):h=z[13];let en=h;z[14]===Symbol.for("react.memo_cache_sentinel")?(x=()=>ee(!0),z[14]=x):x=z[14],z[15]!==q.image||z[16]!==q.name?(g=(0,t.jsx)("div",{className:"group relative cursor-pointer",onClick:x,children:q.image?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("img",{src:q.image,alt:q.name,className:"h-16 w-16 rounded-xl object-cover"}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center rounded-xl bg-black/40 opacity-0 transition-opacity group-hover:opacity-100",children:(0,t.jsx)("span",{className:"text-xs text-white",children:"更换"})})]}):(0,t.jsx)("div",{className:"flex h-16 w-16 items-center justify-center rounded-xl bg-gray-200",children:(0,t.jsx)(c.Plus,{className:"h-6 w-6 text-gray-500"})})}),z[15]=q.image,z[16]=q.name,z[17]=g):g=z[17],z[18]!==q?(v=e=>Q({...q,name:e.target.value}),z[18]=q,z[19]=v):v=z[19],z[20]!==q.name||z[21]!==v?(j=(0,t.jsx)("input",{type:"text",value:q.name,onChange:v,placeholder:"项目名称",className:"w-full text-lg font-bold focus:outline-none"}),z[20]=q.name,z[21]=v,z[22]=j):j=z[22],z[23]!==q?(w=e=>Q({...q,year:parseInt(e.target.value)||0}),z[23]=q,z[24]=w):w=z[24],z[25]!==q.year||z[26]!==w?(N=(0,t.jsx)("input",{type:"number",value:q.year,onChange:w,placeholder:"年份",className:"text-secondary w-20 rounded border border-gray-300 px-2 py-1 text-xs focus:outline-none"}),z[25]=q.year,z[26]=w,z[27]=N):N=z[27],z[28]!==q?(C=e=>Q({...q,url:e.target.value}),z[28]=q,z[29]=C):C=z[29],z[30]!==q.url||z[31]!==C?(S=(0,t.jsx)("input",{type:"url",value:q.url,onChange:C,placeholder:"https://example.com",className:"text-secondary flex-1 truncate text-xs focus:outline-none"}),z[30]=q.url,z[31]=C,z[32]=S):S=z[32],z[33]!==N||z[34]!==S?(R=(0,t.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[N,S]}),z[33]=N,z[34]=S,z[35]=R):R=z[35],z[36]!==j||z[37]!==R?(k=(0,t.jsxs)("div",{className:"flex-1",children:[j,R]}),z[36]=j,z[37]=R,z[38]=k):k=z[38],z[39]!==k||z[40]!==g?(U=(0,t.jsxs)("div",{className:"mb-4 flex items-center gap-4",children:[g,k]}),z[39]=k,z[40]=g,z[41]=U):U=z[41],z[42]!==es?(_=e=>es(e.target.value),z[42]=es,z[43]=_):_=z[43],z[44]!==_||z[45]!==et?(E=(0,t.jsx)("input",{type:"text",value:et,onChange:_,placeholder:"标签，用逗号分隔（如：React, Vue）",className:"w-full rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm focus:outline-none"}),z[44]=_,z[45]=et,z[46]=E):E=z[46],z[47]!==q.tags?(I=q.tags.map(f),z[47]=q.tags,z[48]=I):I=z[48],z[49]!==I?(O=(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-1.5",children:I}),z[49]=I,z[50]=O):O=z[50],z[51]!==E||z[52]!==O?(G=(0,t.jsxs)("div",{className:"mt-3",children:[E,O]}),z[51]=E,z[52]=O,z[53]=G):G=z[53],z[54]!==q?(P=e=>Q({...q,description:e.target.value}),z[54]=q,z[55]=P):P=z[55],z[56]!==q.description||z[57]!==P?(T=(0,t.jsx)("textarea",{value:q.description,onChange:P,placeholder:"项目介绍...",className:"mt-3 w-full resize-none text-sm leading-relaxed focus:outline-none",rows:4}),z[56]=q.description,z[57]=P,z[58]=T):T=z[58];let el=q.github||"";z[59]!==q?(F=e=>Q({...q,github:e.target.value||void 0}),z[59]=q,z[60]=F):F=z[60],z[61]!==el||z[62]!==F?(B=(0,t.jsx)("input",{type:"url",value:el,onChange:F,placeholder:"GitHub URL（可选）",className:"w-full rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm focus:outline-none"}),z[61]=el,z[62]=F,z[63]=B):B=z[63];let ei=q.npm||"";z[64]!==q?(H=e=>Q({...q,npm:e.target.value||void 0}),z[64]=q,z[65]=H):H=z[65],z[66]!==ei||z[67]!==H?(M=(0,t.jsx)("input",{type:"url",value:ei,onChange:H,placeholder:"NPM URL（可选）",className:"w-full rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm focus:outline-none"}),z[66]=ei,z[67]=H,z[68]=M):M=z[68],z[69]!==B||z[70]!==M?(L=(0,t.jsxs)("div",{className:"mt-3 space-y-2",children:[B,M]}),z[69]=B,z[70]=M,z[71]=L):L=z[71],z[72]!==U||z[73]!==G||z[74]!==T||z[75]!==L?(A=(0,t.jsxs)("div",{children:[U,G,T,L]}),z[72]=U,z[73]=G,z[74]=T,z[75]=L,z[76]=A):A=z[76],z[77]!==X?($=(0,t.jsx)("button",{onClick:X,className:"flex-1 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm transition-colors hover:bg-gray-50",children:"取消"}),z[77]=X,z[78]=$):$=z[78];let eo=J?"保存":"添加";return z[79]!==en||z[80]!==eo?(W=(0,t.jsx)("button",{onClick:en,className:"brand-btn flex-1 justify-center px-4",children:eo}),z[79]=en,z[80]=eo,z[81]=W):W=z[81],z[82]!==$||z[83]!==W?(D=(0,t.jsxs)("div",{className:"mt-6 flex gap-3",children:[$,W]}),z[82]=$,z[83]=W,z[84]=D):D=z[84],z[85]!==q.image||z[86]!==ea||z[87]!==Z?(V=Z&&(0,t.jsx)(d,{currentImage:q.image,onClose:()=>ee(!1),onSubmit:ea}),z[85]=q.image,z[86]=ea,z[87]=Z,z[88]=V):V=z[88],z[89]!==X||z[90]!==A||z[91]!==D||z[92]!==V?(Y=(0,t.jsxs)(u.DialogModal,{open:!0,onClose:X,className:"card static w-md max-sm:w-full",children:[A,D,V]}),z[89]=X,z[90]=A,z[91]=D,z[92]=V,z[93]=Y):Y=z[93],Y}function f(e){return(0,t.jsx)("span",{className:"rounded-full bg-gray-100 px-2.5 py-0.5 text-xs text-gray-600",children:e},e)}function y(e){return e}function b(e){return e.trim()}var v=e.i(37572),j=e.i(97005),w=e.i(86909),N=e.i(63580);async function C(e){let{projects:t,imageItems:r}=e,a=await (0,w.getAuthToken)();s.toast.info("正在获取分支信息...");let n=(await (0,v.getRef)(a,N.GITHUB_CONFIG.OWNER,N.GITHUB_CONFIG.REPO,`heads/${N.GITHUB_CONFIG.BRANCH}`)).sha,l=`更新项目列表`;s.toast.info("正在准备文件...");let o=[],c=new Set,u=[...t];if(r&&r.size>0){for(let[e,t]of(s.toast.info("正在上传图片..."),r.entries()))if("file"===t.type){let r=t.hash||await (0,j.hashFileSHA256)(t.file),s=(0,i.getFileExt)(t.file.name),n=`${r}${s}`,l=`/images/project/${n}`;if(!c.has(r)){let e=`public/images/project/${n}`,s=await (0,j.fileToBase64NoPrefix)(t.file),l=await (0,v.createBlob)(a,N.GITHUB_CONFIG.OWNER,N.GITHUB_CONFIG.REPO,s,"base64");o.push({path:e,mode:"100644",type:"blob",sha:l.sha}),c.add(r)}u=u.map(t=>t.url===e?{...t,image:l}:t)}}let d=JSON.stringify(u,null,"	"),m=await (0,v.createBlob)(a,N.GITHUB_CONFIG.OWNER,N.GITHUB_CONFIG.REPO,(0,v.toBase64Utf8)(d),"base64");o.push({path:"src/app/projects/list.json",mode:"100644",type:"blob",sha:m.sha}),s.toast.info("正在创建文件树...");let p=await (0,v.createTree)(a,N.GITHUB_CONFIG.OWNER,N.GITHUB_CONFIG.REPO,o,n);s.toast.info("正在创建提交...");let h=await (0,v.createCommit)(a,N.GITHUB_CONFIG.OWNER,N.GITHUB_CONFIG.REPO,l,p.sha,[n]);s.toast.info("正在更新分支..."),await (0,v.updateRef)(a,N.GITHUB_CONFIG.OWNER,N.GITHUB_CONFIG.REPO,`heads/${N.GITHUB_CONFIG.BRANCH}`,h.sha),s.toast.success("发布成功！")}var S=e.i(71436),R=e.i(66752);function k(){let[e,n]=(0,r.useState)(R.default),[l,i]=(0,r.useState)(R.default),[o,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(!1),[p,h]=(0,r.useState)(null),[x,f]=(0,r.useState)(!1),[y,b]=(0,r.useState)(new Map),v=(0,r.useRef)(null),{isAuth:j,setPrivateKey:w}=(0,S.useAuthStore)(),N=(e,t,r)=>{n(r=>r.map(r=>r.url===t.url?e:r)),r&&b(t=>{let a=new Map(t);return a.set(e.url,r),a})},k=async e=>{try{let t=await e.text();w(t),await U()}catch(e){console.error("Failed to read private key:",e),s.toast.error("读取密钥文件失败")}},U=async()=>{d(!0);try{await C({projects:e,imageItems:y}),i(e),b(new Map),c(!1),s.toast.success("保存成功！")}catch(e){console.error("Failed to save:",e),s.toast.error(`保存失败: ${e?.message||"未知错误"}`)}finally{d(!1)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("input",{ref:v,type:"file",accept:".pem",className:"hidden",onChange:async e=>{let t=e.target.files?.[0];t&&await k(t),e.currentTarget&&(e.currentTarget.value="")}}),(0,t.jsx)("div",{className:"flex flex-col items-center justify-center px-6 pt-32 pb-12",children:(0,t.jsx)("div",{className:"grid w-full max-w-[1200px] grid-cols-2 gap-6 max-md:grid-cols-1",children:e.map((r,a)=>(0,t.jsx)(m,{project:r,isEditMode:o,onUpdate:N,onDelete:()=>{confirm(`确定要删除 ${r.name} 吗？`)&&n(e.filter(e=>e.url!==r.url))}},r.url))})}),(0,t.jsx)(a.motion.div,{initial:{opacity:0,scale:.6},animate:{opacity:1,scale:1},className:"absolute top-4 right-6 flex gap-3 max-sm:hidden",children:o?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{n(l),b(new Map),c(!1)},disabled:u,className:"rounded-xl border bg-white/60 px-6 py-2 text-sm",children:"取消"}),(0,t.jsx)(a.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{h(null),f(!0)},className:"rounded-xl border bg-white/60 px-6 py-2 text-sm",children:"添加"}),(0,t.jsx)(a.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{j?U():v.current?.click()},disabled:u,className:"brand-btn px-6",children:u?"保存中...":j?"保存":"导入密钥"})]}):(0,t.jsx)(a.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>c(!0),className:"rounded-xl border bg-white/60 px-6 py-2 text-sm backdrop-blur-sm transition-colors hover:bg-white/80",children:"编辑"})}),x&&(0,t.jsx)(g,{project:p,onClose:()=>f(!1),onSave:t=>{p?n(e.map(e=>e.url===p.url?t:e)):n([...e,t])}})]})}e.s(["default",()=>k],63936)}]);